!function(e,n){"use strict";var r=function(){return(r=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var u in n=arguments[r])Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u]);return e}).apply(this,arguments)},t=function(e,n,t,u){var o,i;if(e.exists)return r({},e.data(n),t?((o={})[t]=e.id,o):null,u?((i={})[u]=e.ref,i):null)},u=function(e){return{loading:void 0===e||null===e,value:e}},o=function(e){var t=e?e():void 0,o=n.useReducer(function(e,n){switch(n.type){case"error":return r({},e,{error:n.error,loading:!1,value:void 0});case"reset":return u(n.defaultValue);case"value":return r({},e,{error:void 0,loading:!1,value:n.value});default:return e}},u(t)),i=o[0],c=o[1],s=function(){var n=e?e():void 0;c({type:"reset",defaultValue:n})},a=function(e){c({type:"error",error:e})},f=function(e){c({type:"value",value:e})};return n.useMemo(function(){return{error:i.error,loading:i.loading,reset:s,setError:a,setValue:f,value:i.value}},[i.error,i.loading,s,a,f,i.value])},i=function(e,n){var r=!e&&!n,t=!!e&&!!n&&e.isEqual(n);return r||t},c=function(e,r){return function(e,r,t){var u=n.useRef(e);return n.useEffect(function(){r(e,u.current)||(u.current=e,t&&t())}),u}(e,i,r)},s=function(e,r,t){var u=o(),i=u.error,s=u.loading,a=u.reset,f=u.setError,l=u.setValue,v=u.value,d=c(r,a);n.useEffect(function(){if(d.current){if(e){var n=t&&t.snapshotListenOptions?d.current.onSnapshot(t.snapshotListenOptions,l,f):d.current.onSnapshot(l,f);return function(){n()}}d.current.get(t?t.getOptions:void 0).then(l).catch(f)}else l(void 0)},[d.current]);var p=[v,s,i];return n.useMemo(function(){return p},p)},a=function(e,r,u){var o=u?u.idField:void 0,i=u?u.refField:void 0,c=u?u.snapshotOptions:void 0,a=s(e,r,u),f=a[0],l=a[1],v=a[2],d=[n.useMemo(function(){return f?f.docs.map(function(e){return t(e,c,o,i)}):void 0},[f,o,i]),l,v];return n.useMemo(function(){return d},d)},f=function(e,r,t){var u=o(),i=u.error,s=u.loading,a=u.reset,f=u.setError,l=u.setValue,v=u.value,d=c(r,a);n.useEffect(function(){if(d.current){if(e){var n=t&&t.snapshotListenOptions?d.current.onSnapshot(t.snapshotListenOptions,l,f):d.current.onSnapshot(l,f);return function(){n()}}d.current.get(t?t.getOptions:void 0).then(l).catch(f)}else l(void 0)},[d.current]);var p=[v,s,i];return n.useMemo(function(){return p},p)},l=function(e,r,u){var o=u?u.idField:void 0,i=u?u.refField:void 0,c=u?u.snapshotOptions:void 0,s=f(e,r,u),a=s[0],l=s[1],v=s[2],d=[n.useMemo(function(){return a?t(a,c,o,i):void 0},[a,o,i]),l,v];return n.useMemo(function(){return d},d)};e.useCollection=function(e,n){return s(!0,e,n)},e.useCollectionOnce=function(e,n){return s(!1,e,n)},e.useCollectionData=function(e,n){return a(!0,e,n)},e.useCollectionDataOnce=function(e,n){return a(!1,e,n)},e.useDocument=function(e,n){return f(!0,e,n)},e.useDocumentData=function(e,n){return l(!0,e,n)},e.useDocumentOnce=function(e,n){return f(!1,e,n)},e.useDocumentDataOnce=function(e,n){return l(!1,e,n)}}(this["react-firebase-hooks"]=this["react-firebase-hooks"]||{},react);
//# sourceMappingURL=react-firebase-hooks-firestore.js.map
